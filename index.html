<!DOCTYPE html>
{% autoescape true %}
<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src='{{route_prefix}}/js/dripper.js'></script>

    <link type="image/x-icon" rel="shortcut icon" href="{{route_prefix}}/public/z16.ico" />
    <link type="text/css" rel="stylesheet" href="{{route_prefix}}/stylesheets/main.css" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
      Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-89098632-1', 'auto');
      ga('send', 'pageview');

    </script>
  </head>

  <body>
    {% for message in messages %}
    <div class="message" data-messageid="{{ message.id|safe }}">
    <b title="{{ message.email|safe }}">{{ message.name|safe }}
      ({{ message.topic|safe }}) [{{ message.date|safe }}]
    </b>
    <blockquote>{{ message.content|safe }}</blockquote>
    </div>
    {% endfor %}
    <div class="bottom"></div>

    <form action="{{route_prefix}}/send" method="post" id="messageForm" onsubmit="postForm(this); document.getElementById('content').value=''; return false;">
      Name: <input value="{{ name }}" name="name" id="name">
      <div>Email: <input value="{{ email }}" name="email" id="email">
      <div>Topic: <input value="{{ topic }}" name="topic" id="topic">
      <div><textarea name="content" id="content" rows="3" cols="60"
      onkeydown="return onKeyDown(event)"></textarea></div>
      <div><input type="submit" value="Send"></div>
    </form>

    <hr>
    <form action="{{route_prefix}}/search" method="post">
      Query: <input value="{{ query }}" name="query" size="60">
      Max results: <input type="number" value="10"
			  name="num_results" size="4">
      <div><input type="submit" value="Search"></div>
    </form>
    <hr>
    <br>Queries can NOT use the full syntax of
    the <a href="https://cloud.google.com/appengine/docs/python/search/query_strings">Search
      API</a>.
    <br>Example queries: [author:colohan] [topic:chat AND burritos]
    [email:president] [date >= 2000-12-31] [content:"distributed tacos"]
  </body>
</html>
{% endautoescape %}
